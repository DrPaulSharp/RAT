<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of standardTF_stanLay_reflectivityCalculation</title>
  <meta name="keywords" content="standardTF_stanLay_reflectivityCalculation">
  <meta name="description" content="">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- # RAT --><!-- # targetFunctions --><!-- menu.html standard_TF -->
<h1>standardTF_stanLay_reflectivityCalculation
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong></strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function [problem,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers] = standardTF_stanLay_reflectivityCalculation(problemDef,problemDef_cells,problemDef_limits,controls) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../RAT/API/RAT_parse_cells.html" class="code" title="function [repeatLayers,allData,dataLimits,simLimits,contrastLayers,layersDetails] = RAT_parse_cells(problemDef_cells)">RAT_parse_cells</a>	</li><li><a href="../../../RAT/targetFunctions/standard_TF/standardTF_custLay/old/standardTF_stanlay_paraPoints.html" class="code" title="function [outSsubs,backgs,qshifts,sfs,nbas,nbss,resols,chis,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers,allRoughs] = standardTF_stanlay_paraPoints(resample,numberOfContrasts,geometry,repeatLayers,cBacks,cShifts,cScales,cNbas,cNbss,cRes,backs,shifts,sf,nba,nbs,res,dataPresent,allData,dataLimits,simLimits,nParams,params,contrastLayers,numberOfLayers,layersDetails,problemDef_limits,backsType,calcSld)">standardTF_stanlay_paraPoints</a>	Allocate the memory for the output arrays before the main loop</li><li><a href="../../../RAT/targetFunctions/standard_TF/standardTF_custLay/old/standardTF_stanlay_paraPoints.html" class="code" title="function [outSsubs,backgs,qshifts,sfs,nbas,nbss,resols,chis,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers,allRoughs] = standardTF_stanlay_paraPoints(resample,numberOfContrasts,geometry,repeatLayers,cBacks,cShifts,cScales,cNbas,cNbss,cRes,backs,shifts,sf,nba,nbs,res,dataPresent,allData,dataLimits,simLimits,nParams,params,contrastLayers,numberOfLayers,layersDetails,problemDef_limits,backsType,calcSld)">standardTF_stanlay_paraPoints</a>	Allocate the memory for the output arrays before the main loop</li><li><a href="../../../RAT/targetFunctions/standard_TF/standardTF_stanLay/standardTF_stanlay_paraContrasts.html" class="code" title="function [outSsubs,backgs,qshifts,sfs,nbas,nbss,resols,chis,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers,allRoughs] = standardTF_stanlay_paraContrasts(resample,numberOfContrasts,geometry,repeatLayers,cBacks,cShifts,cScales,cNbas,cNbss,cRes,backs,shifts,sf,nba,nbs,res,dataPresent,allData,dataLimits,simLimits,nParams,params,contrastLayers,numberOfLayers,layersDetails,problemDef_limits,backsType,calcSld)">standardTF_stanlay_paraContrasts</a>	Allocate the memory for the output arrays before the main loop</li><li><a href="../../../RAT/targetFunctions/standard_TF/standardTF_stanLay/standardTF_stanlay_paraContrasts.html" class="code" title="function [outSsubs,backgs,qshifts,sfs,nbas,nbss,resols,chis,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers,allRoughs] = standardTF_stanlay_paraContrasts(resample,numberOfContrasts,geometry,repeatLayers,cBacks,cShifts,cScales,cNbas,cNbss,cRes,backs,shifts,sf,nba,nbs,res,dataPresent,allData,dataLimits,simLimits,nParams,params,contrastLayers,numberOfLayers,layersDetails,problemDef_limits,backsType,calcSld)">standardTF_stanlay_paraContrasts</a>	Allocate the memory for the output arrays before the main loop</li><li><a href="../../../RAT/targetFunctions/standard_TF/standardTF_stanLay/standardTF_stanlay_paraContrasts.html" class="code" title="function [outSsubs,backgs,qshifts,sfs,nbas,nbss,resols,chis,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers,allRoughs] = standardTF_stanlay_paraContrasts(resample,numberOfContrasts,geometry,repeatLayers,cBacks,cShifts,cScales,cNbas,cNbss,cRes,backs,shifts,sf,nba,nbs,res,dataPresent,allData,dataLimits,simLimits,nParams,params,contrastLayers,numberOfLayers,layersDetails,problemDef_limits,backsType,calcSld)">standardTF_stanlay_paraContrasts</a>	Allocate the memory for the output arrays before the main loop</li><li><a href="../../../RAT/targetFunctions/standard_TF/standardTF_stanLay/standardTF_stanlay_paraPoints.html" class="code" title="function [outSsubs,backgs,qshifts,sfs,nbas,nbss,resols,chis,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers,allRoughs] = standardTF_stanlay_paraContrasts(resample,numberOfContrasts,geometry,repeatLayers,cBacks,cShifts,cScales,cNbas,cNbss,cRes,backs,shifts,sf,nba,nbs,res,dataPresent,allData,dataLimits,simLimits,nParams,params,contrastLayers,numberOfLayers,layersDetails,problemDef_limits,backsType,calcSld)">standardTF_stanlay_paraPoints</a>	Allocate the memory for the output arrays before the main loop</li><li><a href="../../../RAT/targetFunctions/standard_TF/standardTF_stanLay/standardTF_stanlay_paraPoints.html" class="code" title="function [outSsubs,backgs,qshifts,sfs,nbas,nbss,resols,chis,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers,allRoughs] = standardTF_stanlay_paraContrasts(resample,numberOfContrasts,geometry,repeatLayers,cBacks,cShifts,cScales,cNbas,cNbss,cRes,backs,shifts,sf,nba,nbs,res,dataPresent,allData,dataLimits,simLimits,nParams,params,contrastLayers,numberOfLayers,layersDetails,problemDef_limits,backsType,calcSld)">standardTF_stanlay_paraPoints</a>	Allocate the memory for the output arrays before the main loop</li><li><a href="../../../RAT/targetFunctions/standard_TF/standardTF_stanLay/standardTF_stanlay_paraPoints.html" class="code" title="function [outSsubs,backgs,qshifts,sfs,nbas,nbss,resols,chis,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers,allRoughs] = standardTF_stanlay_paraContrasts(resample,numberOfContrasts,geometry,repeatLayers,cBacks,cShifts,cScales,cNbas,cNbss,cRes,backs,shifts,sf,nba,nbs,res,dataPresent,allData,dataLimits,simLimits,nParams,params,contrastLayers,numberOfLayers,layersDetails,problemDef_limits,backsType,calcSld)">standardTF_stanlay_paraPoints</a>	Allocate the memory for the output arrays before the main loop</li><li><a href="../../../RAT/targetFunctions/standard_TF/standardTF_stanLay/standardTF_stanlay_single.html" class="code" title="function [outSsubs,backgs,qshifts,sfs,nbas,nbss,resols,chis,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers,allRoughs] = standardTF_stanlay_single(resample,numberOfContrasts,geometry,repeatLayers,cBacks,cShifts,cScales,cNbas,cNbss,cRes,backs,shifts,sf,nba,nbs,res,dataPresent,allData,dataLimits,simLimits,nParams,params,contrastLayers,numberOfLayers,layersDetails,problemDef_limits,backsType,calcSld)">standardTF_stanlay_single</a>	Allocate the memory for the output arrays before the main loop</li><li><a href="../../../RAT/targetFunctions/standard_TF/standardTF_stanLay/standardTF_stanlay_single.html" class="code" title="function [outSsubs,backgs,qshifts,sfs,nbas,nbss,resols,chis,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers,allRoughs] = standardTF_stanlay_single(resample,numberOfContrasts,geometry,repeatLayers,cBacks,cShifts,cScales,cNbas,cNbss,cRes,backs,shifts,sf,nba,nbs,res,dataPresent,allData,dataLimits,simLimits,nParams,params,contrastLayers,numberOfLayers,layersDetails,problemDef_limits,backsType,calcSld)">standardTF_stanlay_single</a>	Allocate the memory for the output arrays before the main loop</li><li><a href="../../../RAT/targetFunctions/standard_TF/standardTF_stanLay/standardTF_stanlay_single.html" class="code" title="function [outSsubs,backgs,qshifts,sfs,nbas,nbss,resols,chis,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers,allRoughs] = standardTF_stanlay_single(resample,numberOfContrasts,geometry,repeatLayers,cBacks,cShifts,cScales,cNbas,cNbss,cRes,backs,shifts,sf,nba,nbs,res,dataPresent,allData,dataLimits,simLimits,nParams,params,contrastLayers,numberOfLayers,layersDetails,problemDef_limits,backsType,calcSld)">standardTF_stanlay_single</a>	Allocate the memory for the output arrays before the main loop</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../RAT/targetFunctions/standard_TF/old/%standardTF_stanLay_parallel/stanLay_main.html" class="code" title="">stanLay_main</a>	</li><li><a href="standardTF_reflectivityCalculation.html" class="code" title="function [problem,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers] = standardTF_reflectivityCalculation(problemDef,problemDef_cells,problemDef_limits,controls)">standardTF_reflectivityCalculation</a>	Decide what kind of calculation it is and call the appropriate one</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function [problem,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers] = standardTF_stanLay_reflectivityCalculation(problemDef,problemDef_cells,problemDef_limits,controls)</a>
0002 
0003 
0004 [repeatLayers,<span class="keyword">...</span>
0005  allData,<span class="keyword">...</span>
0006  dataLimits,<span class="keyword">...</span>
0007  simLimits,<span class="keyword">...</span>
0008  contrastLayers,<span class="keyword">...</span>
0009  layersDetails] = <a href="../../../RAT/API/RAT_parse_cells.html" class="code" title="function [repeatLayers,allData,dataLimits,simLimits,contrastLayers,layersDetails] = RAT_parse_cells(problemDef_cells)">RAT_parse_cells</a>(problemDef_cells);
0010 
0011 
0012 <span class="comment">%Extract individual parameters from problemDef</span>
0013 res = problemDef.resample;
0014 numberOfContrasts = problemDef.numberOfContrasts;
0015 geometry = problemDef.geometry;
0016 <span class="comment">%nbairs = problemDef.nbairs;</span>
0017 <span class="comment">%nbsubs = problemDef.nbsubs;</span>
0018 <span class="comment">%repeats = problemDef.repeatLayers;</span>
0019 cBacks = problemDef.contrastBacks;
0020 cShifts = problemDef.contrastShifts;
0021 cScales = problemDef.contrastScales;
0022 cNbas = problemDef.contrastNbas;
0023 cNbss = problemDef.contrastNbss;
0024 cRes = problemDef.contrastRes;
0025 backs = problemDef.backs;
0026 shifts = problemDef.shifts;
0027 sf = problemDef.sf;
0028 nba = problemDef.nba;
0029 nbs = problemDef.nbs;
0030 res = problemDef.res;
0031 dataPresent = problemDef.dataPresent;
0032 <span class="comment">%allData = problemDef.allData;</span>
0033 <span class="comment">%dataLimits = problemDef.dataLimits;</span>
0034 <span class="comment">%simLimits = problemDef.simLimits;</span>
0035 <span class="comment">%repeatLayers = problemDef.repeatLayers;</span>
0036 nParams = length(problemDef.params);
0037 params = problemDef.params;
0038 <span class="comment">%contrastLayers = problemDef.contrastLayers;</span>
0039 numberOfLayers = problemDef.numberOfLayers;
0040 <span class="comment">%layersDetails = problemDef.layersDetails;</span>
0041 resample = problemDef.resample;
0042 backsType = problemDef.contrastBacksType;
0043 calcSld = controls.calcSld;
0044 
0045 
0046 <span class="comment">%Pre-allocation</span>
0047 outSsubs = params(1);
0048 backgs = zeros(numberOfContrasts,1);
0049 qshifts = zeros(numberOfContrasts,1);
0050 sfs = zeros(numberOfContrasts,1);
0051 nbas = zeros(numberOfContrasts,1);
0052 nbss = zeros(numberOfContrasts,1);
0053 chis = zeros(numberOfContrasts,1);
0054 resols = zeros(numberOfContrasts,1);
0055 allRoughs = zeros(numberOfContrasts,1);
0056 
0057 reflectivity = cell(numberOfContrasts,1);
0058 <span class="keyword">for</span> i = 1:numberOfContrasts
0059     reflectivity{i} = [1 1 ; 1 1];
0060 <span class="keyword">end</span>
0061 
0062 Simulation = cell(numberOfContrasts,1);
0063 <span class="keyword">for</span> i = 1:numberOfContrasts
0064     Simulation{i} = [1 1 ; 1 1];
0065 <span class="keyword">end</span>
0066 
0067 shifted_data = cell(numberOfContrasts,1);
0068 <span class="keyword">for</span> i = 1:numberOfContrasts
0069     shifted_data{i} = [1 1 1; 1 1 1];
0070 <span class="keyword">end</span>
0071 
0072 layerSlds = cell(numberOfContrasts,1);
0073 <span class="keyword">for</span> i = 1:numberOfContrasts
0074     layerSlds{i} = [1 1 1; 1 1 1];
0075 <span class="keyword">end</span>
0076 
0077 sldProfiles = cell(numberOfContrasts,1);
0078 <span class="keyword">for</span> i = 1:numberOfContrasts
0079     sldProfiles{i} = [1 1; 1 1];
0080 <span class="keyword">end</span>
0081 
0082 allLayers = cell(numberOfContrasts,1);
0083 <span class="keyword">for</span> i = 1:numberOfContrasts
0084     allLayers{i} = [1 ; 1];
0085 <span class="keyword">end</span>
0086 
0087 para = controls.para;
0088 
0089 <span class="keyword">switch</span> para
0090     <span class="keyword">case</span> <span class="string">'single'</span>
0091         
0092         [outSsubs,backgs,qshifts,sfs,nbas,nbss,resols,chis,reflectivity,<span class="keyword">...</span>
0093             Simulation,shifted_data,layerSlds,sldProfiles,allLayers,<span class="keyword">...</span>
0094             allRoughs]= <a href="../../../RAT/targetFunctions/standard_TF/standardTF_stanLay/standardTF_stanlay_single.html" class="code" title="function [outSsubs,backgs,qshifts,sfs,nbas,nbss,resols,chis,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers,allRoughs] = standardTF_stanlay_single(resample,numberOfContrasts,geometry,repeatLayers,cBacks,cShifts,cScales,cNbas,cNbss,cRes,backs,shifts,sf,nba,nbs,res,dataPresent,allData,dataLimits,simLimits,nParams,params,contrastLayers,numberOfLayers,layersDetails,problemDef_limits,backsType,calcSld)">standardTF_stanlay_single</a>(resample, <span class="keyword">...</span>
0095             numberOfContrasts,geometry,repeatLayers,cBacks,cShifts, <span class="keyword">...</span>
0096             cScales,cNbas,cNbss,cRes,backs,shifts,sf,nba,nbs,res,dataPresent , <span class="keyword">...</span>
0097             allData ,dataLimits ,simLimits ,nParams ,params ,contrastLayers, <span class="keyword">...</span>
0098             numberOfLayers ,layersDetails,problemDef_limits,backsType,calcSld);
0099         
0100      <span class="keyword">case</span> <span class="string">'points'</span>
0101          
0102         [outSsubs,backgs,qshifts,sfs,nbas,nbss,resols,chis,reflectivity,<span class="keyword">...</span>
0103             Simulation,shifted_data,layerSlds,sldProfiles,allLayers,<span class="keyword">...</span>
0104             allRoughs] = <a href="../../../RAT/targetFunctions/standard_TF/standardTF_custLay/old/standardTF_stanlay_paraPoints.html" class="code" title="function [outSsubs,backgs,qshifts,sfs,nbas,nbss,resols,chis,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers,allRoughs] = standardTF_stanlay_paraPoints(resample,numberOfContrasts,geometry,repeatLayers,cBacks,cShifts,cScales,cNbas,cNbss,cRes,backs,shifts,sf,nba,nbs,res,dataPresent,allData,dataLimits,simLimits,nParams,params,contrastLayers,numberOfLayers,layersDetails,problemDef_limits,backsType,calcSld)">standardTF_stanlay_paraPoints</a>(resample, <span class="keyword">...</span>
0105             numberOfContrasts,geometry,repeatLayers,cBacks,cShifts, <span class="keyword">...</span>
0106             cScales,cNbas,cNbss,cRes,backs,shifts,sf,nba,nbs,res,dataPresent , <span class="keyword">...</span>
0107             allData ,dataLimits ,simLimits ,nParams ,params ,contrastLayers, <span class="keyword">...</span>
0108             numberOfLayers ,layersDetails,problemDef_limits,backsType,calcSld);
0109         
0110     <span class="keyword">case</span> <span class="string">'contrasts'</span>
0111         
0112         [outSsubs,backgs,qshifts,sfs,nbas,nbss,resols,chis,reflectivity,<span class="keyword">...</span>
0113             Simulation,shifted_data,layerSlds,sldProfiles,allLayers,<span class="keyword">...</span>
0114             allRoughs] = <a href="../../../RAT/targetFunctions/standard_TF/standardTF_stanLay/standardTF_stanlay_paraContrasts.html" class="code" title="function [outSsubs,backgs,qshifts,sfs,nbas,nbss,resols,chis,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers,allRoughs] = standardTF_stanlay_paraContrasts(resample,numberOfContrasts,geometry,repeatLayers,cBacks,cShifts,cScales,cNbas,cNbss,cRes,backs,shifts,sf,nba,nbs,res,dataPresent,allData,dataLimits,simLimits,nParams,params,contrastLayers,numberOfLayers,layersDetails,problemDef_limits,backsType,calcSld)">standardTF_stanlay_paraContrasts</a>(resample, <span class="keyword">...</span>
0115             numberOfContrasts,geometry,repeatLayers,cBacks,cShifts, <span class="keyword">...</span>
0116             cScales,cNbas,cNbss,cRes,backs,shifts,sf,nba,nbs,res,dataPresent , <span class="keyword">...</span>
0117             allData ,dataLimits ,simLimits ,nParams ,params ,contrastLayers, <span class="keyword">...</span>
0118             numberOfLayers,layersDetails,problemDef_limits,backsType,calcSld);      
0119 <span class="keyword">end</span>
0120 
0121 problem.ssubs = outSsubs;
0122 problem.backgrounds = backgs;
0123 problem.qshifts = qshifts;
0124 problem.scalefactors = sfs;
0125 problem.nbairs = nbas;
0126 problem.nbsubs = nbss;
0127 problem.resolutions = resols;
0128 problem.calculations.all_chis = chis;
0129 problem.calculations.sum_chi = sum(chis);
0130 problem.allSubRough = allRoughs;
0131 
0132 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Sat 20-Feb-2021 16:50:51 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>