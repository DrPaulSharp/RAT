<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of scriptToTestCppCustLayRoute</title>
  <meta name="keywords" content="scriptToTestCppCustLayRoute">
  <meta name="description" content="% Custom Layers Example for Supported DSPC layer.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- # targetFunctions --><!-- # common --><!-- # loopCppCustlayWrapper -->
<h1>scriptToTestCppCustLayRoute
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>% Custom Layers Example for Supported DSPC layer.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>This is a script file. </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment">% Custom Layers Example for Supported DSPC layer.
 
 
 Example of using Custom layers to model a DSPC supportd bilayer.
 
 
 
 Start by making the class and setting it to a custom layers type:</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../API/controlsDef/controlsDef.html" class="code" title="">controlsDef</a>	</li><li><a href="../../../API/projectClass/projectClass.html" class="code" title="">projectClass</a>	</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">%% Custom Layers Example for Supported DSPC layer.</span>
0002 <span class="comment">%</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% Example of using Custom layers to model a DSPC supportd bilayer.</span>
0005 <span class="comment">%</span>
0006 <span class="comment">%</span>
0007 <span class="comment">%</span>
0008 <span class="comment">% Start by making the class and setting it to a custom layers type:</span>
0009 
0010 problem = <a href="../../../API/projectClass/projectClass.html" class="code" title="">projectClass</a>(<span class="string">'Orso lipid example - custom layers'</span>);
0011 problem.setModelType(<span class="string">'custom layers'</span>);
0012 problem.setGeometry(<span class="string">'Substrate/liquid'</span>);
0013 problem.setUsePriors(true);
0014 <span class="comment">%%</span>
0015 <span class="comment">%</span>
0016 <span class="comment">%</span>
0017 <span class="comment">% % First we need to set up a parameters group. We will be using a pre-prepared</span>
0018 <span class="comment">% % custom model file, so it's useful to look at this to check which parameters</span>
0019 <span class="comment">% % we are going to need:</span>
0020 <span class="comment">%</span>
0021 type customBilayer.m
0022 <span class="comment">%%</span>
0023 <span class="comment">%</span>
0024 <span class="comment">%</span>
0025 <span class="comment">% We need to add the relevant parameters we are going to need to define the</span>
0026 <span class="comment">% model (note that Substrate Roughness' always exists as parameter 1..</span>
0027 
0028 Parameters = {
0029     <span class="comment">%       Name                min         val         max     fit?</span>
0030         {<span class="string">'Oxide thick'</span>,         5,          20,         60,     true   };
0031         {<span class="string">'Oxide Hydration'</span>      0,          0.2,        0.5,    true   };
0032         {<span class="string">'Lipid APM'</span>            45          55          65      true   };
0033         {<span class="string">'Head Hydration'</span>       0           0.2         0.5     true   };
0034         {<span class="string">'Bilayer Hydration'</span>    0           0.1         0.2     true   };
0035         {<span class="string">'Bilayer Roughness'</span>    2           4           8       true   };
0036         {<span class="string">'Water Thickness'</span>      0           2           10      true   };
0037         };
0038     
0039  problem.addParamGroup(Parameters);
0040  problem.setParameter(1,<span class="string">'min'</span>,1,<span class="string">'max'</span>,10);
0041  
0042 <span class="comment">%%</span>
0043 <span class="comment">%</span>
0044 <span class="comment">%</span>
0045 <span class="comment">% Need to add the relevant Bulk SLD's. Change the bulk in from air to silicon,</span>
0046 <span class="comment">% and add two additional water contrasts:</span>
0047 
0048 <span class="comment">% Change bulk in from air to silicon....</span>
0049 problem.setBulkIn(1,<span class="string">'name'</span>,<span class="string">'Silicon'</span>,<span class="string">'min'</span>,2.07e-6,<span class="string">'value'</span>,2.073e-6,<span class="string">'max'</span>,2.08e-6,<span class="string">'fit'</span>,false);
0050 
0051 <span class="comment">% Add two more values for bulk out....</span>
0052 problem.addBulkOut({<span class="string">'SLD SMW'</span>,1e-6,2.073e-6,3e-6,true});
0053 problem.addBulkOut({<span class="string">'SLD H2O'</span>,-0.6e-6,-0.56e-6,-0.3e-6,true});
0054 
0055 problem.setBulkOut(1,<span class="string">'fit'</span>,true,<span class="string">'min'</span>,5e-6);
0056 
0057 <span class="comment">%%</span>
0058 <span class="comment">% Now add the datafiles.  We have three datasets we need to consider - the bilayer</span>
0059 <span class="comment">% against D2O, Silicon Matched water and H2O. Load these datafiles in and put</span>
0060 <span class="comment">% them in the data block....</span>
0061 
0062 <span class="comment">% Read in the datafiles</span>
0063 D2O_data = dlmread(<span class="string">'c_PLP0016596.dat'</span>);
0064 SMW_data = dlmread(<span class="string">'c_PLP0016601.dat'</span>);
0065 H2O_data = dlmread(<span class="string">'c_PLP0016607.dat'</span>);
0066 
0067 <span class="comment">% Add the data to the project</span>
0068 problem.addData(<span class="string">'Bilayer / D2O'</span>, D2O_data(:,1:3));
0069 problem.addData(<span class="string">'Bilayer / SMW'</span>, SMW_data(:,1:3));
0070 problem.addData(<span class="string">'Bilayer / H2O'</span>, H2O_data(:,1:3));
0071 
0072 problem.setData(2,<span class="string">'dataRange'</span>,[0.013 0.37]);
0073 problem.setData(3,<span class="string">'dataRange'</span>,[0.013 0.37]);
0074 problem.setData(4,<span class="string">'dataRange'</span>,[0.013 0.37]);
0075 
0076 <span class="comment">%%</span>
0077 <span class="comment">%</span>
0078 <span class="comment">%</span>
0079 <span class="comment">% Add the custom file to the project....</span>
0080 
0081 <span class="comment">% problem.addCustomFile({'DSPC Model','customBilayer.m','matlab','pwd'});</span>
0082 problem.addCustomFile({<span class="string">'DSPC Model'</span>,<span class="string">'customBilayer'</span>,<span class="string">'cpp'</span>,<span class="string">'C:\Users\oba7931403\Documents\GitHub\RAT\targetFunctions\common\loopCppCustlayWrapper'</span>});
0083 <span class="comment">%%</span>
0084 <span class="comment">%</span>
0085 <span class="comment">%</span>
0086 <span class="comment">% Also, add the relevant background parameters - one each for each contrast:</span>
0087 
0088 <span class="comment">% Change the name of the existing parameters to refer to D2O</span>
0089 problem.setBacksPar(1,<span class="string">'name'</span>,<span class="string">'Backs par D2O'</span>,<span class="string">'fit'</span>,true,<span class="string">'min'</span>,1e-10,<span class="string">'max'</span>,1e-5,<span class="string">'val'</span>,1e-07);
0090 
0091 <span class="comment">% Add two new backs parameters for the other two..</span>
0092 problem.addBacksPar(<span class="string">'Backs par SMW'</span>,1e-10,1e-7,1e-5,true);
0093 problem.addBacksPar(<span class="string">'Backs par H2O'</span>,1e-10,1e-7,1e-5,true);
0094 
0095 <span class="comment">% And add the two new constant backgrounds..</span>
0096 problem.addBackground(<span class="string">'Background SMW'</span>,<span class="string">'constant'</span>,<span class="string">'Backs par SMW'</span>);
0097 problem.addBackground(<span class="string">'Background H2O'</span>,<span class="string">'constant'</span>,<span class="string">'Backs par H2O'</span>);
0098 
0099 <span class="comment">% And edit the other one....</span>
0100 problem.setBackgroundValue(1,<span class="string">'name'</span>,<span class="string">'Background D2O'</span>);
0101 problem.setBackgroundValue(1,<span class="string">'value'</span>,<span class="string">'Backs par D2O'</span>);
0102 
0103 <span class="comment">% Finally modify some of the other parameters to be more suitable values</span>
0104 <span class="comment">% for a solid / liquid experiment.</span>
0105 
0106 <span class="comment">% Set the scalefactor...</span>
0107 problem.setScalefactor(1,<span class="string">'Value'</span>,1,<span class="string">'min'</span>,0.5,<span class="string">'max'</span>,2,<span class="string">'fit'</span>,true);
0108 
0109 <span class="comment">%%</span>
0110 <span class="comment">%</span>
0111 <span class="comment">%</span>
0112 <span class="comment">% Now add the three contrasts as before:</span>
0113 
0114 <span class="comment">% D2O contrast..</span>
0115 problem.addContrast(<span class="string">'name'</span>,<span class="string">'Bilayer / D2O'</span>,<span class="keyword">...</span>
0116     <span class="string">'background'</span>,<span class="string">'Background D2O'</span>,<span class="keyword">...</span>
0117     <span class="string">'resolution'</span>,<span class="string">'Resolution 1'</span>,<span class="keyword">...</span>
0118     <span class="string">'scalefactor'</span>, <span class="string">'Scalefactor 1'</span>,<span class="keyword">...</span>
0119     <span class="string">'nbs'</span>, <span class="string">'SLD D2O'</span>,<span class="keyword">...</span><span class="comment">        % This is bulk out ('Nb Subs')</span>
0120     <span class="string">'nba'</span>, <span class="string">'Silicon'</span>,<span class="keyword">...</span><span class="comment">        % This is bulk in ('Nb Air')</span>
0121     <span class="string">'data'</span>, <span class="string">'Bilayer / D2O'</span>);
0122 
0123 <span class="comment">% SMW contrast..</span>
0124 problem.addContrast(<span class="string">'name'</span>,<span class="string">'Bilayer / SMW'</span>,<span class="keyword">...</span>
0125     <span class="string">'background'</span>,<span class="string">'Background SMW'</span>,<span class="keyword">...</span>
0126     <span class="string">'resolution'</span>,<span class="string">'Resolution 1'</span>,<span class="keyword">...</span>
0127     <span class="string">'scalefactor'</span>, <span class="string">'Scalefactor 1'</span>,<span class="keyword">...</span>
0128     <span class="string">'nbs'</span>, <span class="string">'SLD SMW'</span>,<span class="keyword">...</span><span class="comment">        % This is bulk out</span>
0129     <span class="string">'nba'</span>, <span class="string">'Silicon'</span>,<span class="keyword">...</span><span class="comment">        % This is bulk in</span>
0130     <span class="string">'data'</span>, <span class="string">'Bilayer / SMW'</span>);
0131 
0132 <span class="comment">% SMW contrast..</span>
0133 problem.addContrast(<span class="string">'name'</span>,<span class="string">'Bilayer / H2O'</span>,<span class="keyword">...</span>
0134     <span class="string">'background'</span>,<span class="string">'Background H2O'</span>,<span class="keyword">...</span>
0135     <span class="string">'resolution'</span>,<span class="string">'Resolution 1'</span>,<span class="keyword">...</span>
0136     <span class="string">'scalefactor'</span>, <span class="string">'Scalefactor 1'</span>,<span class="keyword">...</span>
0137     <span class="string">'nbs'</span>, <span class="string">'SLD H2O'</span>,<span class="keyword">...</span><span class="comment">        % This is bulk out</span>
0138     <span class="string">'nba'</span>, <span class="string">'Silicon'</span>,<span class="keyword">...</span><span class="comment">        % This is bulk in</span>
0139     <span class="string">'data'</span>, <span class="string">'Bilayer / H2O'</span>);
0140 <span class="comment">%%</span>
0141 
0142 <span class="comment">%</span>
0143 <span class="comment">%</span>
0144 <span class="comment">% And set the model for each..</span>
0145 
0146 problem.setContrastModel(1,<span class="string">'DSPC Model'</span>);
0147 problem.setContrastModel(2,<span class="string">'DSPC Model'</span>);
0148 problem.setContrastModel(3,<span class="string">'DSPC Model'</span>);
0149 
0150 
0151 controls = <a href="../../../API/controlsDef/controlsDef.html" class="code" title="">controlsDef</a>();
0152 controls.calcSldDuringFit = <span class="string">'no'</span>;
0153 controls.nsimu = 7000;
0154 controls.repeats = 3;
0155 controls.parallel = <span class="string">'contrasts'</span>;
0156 
0157 
0158</pre></div>
<hr><address>Generated on Tue 14-Jun-2022 14:15:27 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>