<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of standardTF_custXY_reflectivityCalculation</title>
  <meta name="keywords" content="standardTF_custXY_reflectivityCalculation">
  <meta name="description" content="">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- # RAT --><!-- # targetFunctions --><!-- menu.html standard_TF -->
<h1>standardTF_custXY_reflectivityCalculation
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong></strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function [problem,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers] = standardTF_custXY_reflectivityCalculation(problemDef,problemDef_cells,problemDef_limits,controls) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../RAT/API/RAT_parse_cells.html" class="code" title="function [repeatLayers,allData,dataLimits,simLimits,contrastLayers,layersDetails,customFiles] = RAT_parse_cells(problemDef_cells)">RAT_parse_cells</a>	</li><li><a href="../../../RAT/targetFunctions/standard_TF/standardTF_custXY/standardTF_custXY_paraPoints.html" class="code" title="function         [outSsubs,backgs,qshifts,sfs,nbas,nbss,resols,chis,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers,allRoughs] = standardTF_custXY_paraPoints(resample,numberOfContrasts,geometry,repeatLayers ,cBacks ,cShifts ,cScales ,cNbas ,cNbss,cRes ,backs ,shifts ,sf,nba ,nbs ,res ,dataPresent ,allData ,dataLimits ,simLimits ,nParams ,params ,contrastLayers ,numberOfLayers ,layersDetails,problemDef_limits,fname,lang,path,backsType,calcSLD);">standardTF_custXY_paraPoints</a>	coder.extrinsic('callModules');</li><li><a href="../../../RAT/targetFunctions/standard_TF/standardTF_custXY/standardTF_custXY_paraPoints.html" class="code" title="function         [outSsubs,backgs,qshifts,sfs,nbas,nbss,resols,chis,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers,allRoughs] = standardTF_custXY_paraPoints(resample,numberOfContrasts,geometry,repeatLayers ,cBacks ,cShifts ,cScales ,cNbas ,cNbss,cRes ,backs ,shifts ,sf,nba ,nbs ,res ,dataPresent ,allData ,dataLimits ,simLimits ,nParams ,params ,contrastLayers ,numberOfLayers ,layersDetails,problemDef_limits,fname,lang,path,backsType,calcSLD);">standardTF_custXY_paraPoints</a>	coder.extrinsic('callModules');</li><li><a href="../../../RAT/targetFunctions/standard_TF/standardTF_custXY/standardTF_custXY_single.html" class="code" title="function         [outSsubs,backgs,qshifts,sfs,nbas,nbss,resols,chis,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers,allRoughs] = standardTF_custXY_single(resample,numberOfContrasts,geometry,repeatLayers ,cBacks ,cShifts ,cScales ,cNbas ,cNbss,cRes ,backs ,shifts ,sf,nba ,nbs ,res ,dataPresent ,allData ,dataLimits ,simLimits ,nParams ,params ,contrastLayers ,numberOfLayers ,layersDetails,problemDef_limits,fname,lang,path,backsType,calcSLD);">standardTF_custXY_single</a>	coder.extrinsic('callModules');</li><li><a href="../../../RAT/targetFunctions/standard_TF/standardTF_custXY/standardTF_custXY_single.html" class="code" title="function         [outSsubs,backgs,qshifts,sfs,nbas,nbss,resols,chis,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers,allRoughs] = standardTF_custXY_single(resample,numberOfContrasts,geometry,repeatLayers ,cBacks ,cShifts ,cScales ,cNbas ,cNbss,cRes ,backs ,shifts ,sf,nba ,nbs ,res ,dataPresent ,allData ,dataLimits ,simLimits ,nParams ,params ,contrastLayers ,numberOfLayers ,layersDetails,problemDef_limits,fname,lang,path,backsType,calcSLD);">standardTF_custXY_single</a>	coder.extrinsic('callModules');</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function [problem,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers] = standardTF_custXY_reflectivityCalculation(problemDef,problemDef_cells,problemDef_limits,controls)</a>
0002 
0003 
0004 <span class="keyword">global</span> RAT_DEBUG DEBUGVARS
0005 
0006 [repeatLayers,<span class="keyword">...</span>
0007  allData,<span class="keyword">...</span>
0008  dataLimits,<span class="keyword">...</span>
0009  simLimits,<span class="keyword">...</span>
0010  contrastLayers,<span class="keyword">...</span>
0011  layersDetails] = <a href="../../../RAT/API/RAT_parse_cells.html" class="code" title="function [repeatLayers,allData,dataLimits,simLimits,contrastLayers,layersDetails,customFiles] = RAT_parse_cells(problemDef_cells)">RAT_parse_cells</a>(problemDef_cells);
0012 
0013 
0014 <span class="comment">%Extract individual parameters from problemDef</span>
0015 res = problemDef.resample;
0016 numberOfContrasts = problemDef.numberOfContrasts;
0017 geometry = problemDef.geometry;
0018 <span class="comment">%nbairs = problemDef.nbairs;</span>
0019 <span class="comment">%nbsubs = problemDef.nbsubs;</span>
0020 <span class="comment">%repeats = problemDef.repeatLayers;</span>
0021 cBacks = problemDef.contrastBacks;
0022 cShifts = problemDef.contrastShifts;
0023 cScales = problemDef.contrastScales;
0024 cNbas = problemDef.contrastNbas;
0025 cNbss = problemDef.contrastNbss;
0026 cRes = problemDef.contrastRes;
0027 backs = problemDef.backs;
0028 shifts = problemDef.shifts;
0029 sf = problemDef.sf;
0030 nba = problemDef.nba;
0031 nbs = problemDef.nbs;
0032 res = problemDef.res;
0033 dataPresent = problemDef.dataPresent;
0034 <span class="comment">%allData = problemDef.allData;</span>
0035 <span class="comment">%dataLimits = problemDef.dataLimits;</span>
0036 <span class="comment">%simLimits = problemDef.simLimits;</span>
0037 <span class="comment">%repeatLayers = problemDef.repeatLayers;</span>
0038 nParams = length(problemDef.params);
0039 params = problemDef.params;
0040 <span class="comment">%contrastLayers = problemDef.contrastLayers;</span>
0041 numberOfLayers = problemDef.numberOfLayers;
0042 <span class="comment">%layersDetails = problemDef.layersDetails;</span>
0043 resample = problemDef.resample;
0044 fname = problemDef.modelFilename;
0045 lang  = problemDef.modelLanguage;
0046 path = problemDef.path;
0047 backsType = problemDef.contrastBacksType;
0048 calcSLD = controls.calcSld;
0049 
0050 <span class="comment">%Pre-allocation</span>
0051 outSsubs = params(1);
0052 backgs = zeros(numberOfContrasts,1);
0053 qshifts = zeros(numberOfContrasts,1);
0054 sfs = zeros(numberOfContrasts,1);
0055 nbas = zeros(numberOfContrasts,1);
0056 nbss = zeros(numberOfContrasts,1);
0057 chis = zeros(numberOfContrasts,1);
0058 resols = zeros(numberOfContrasts,1);
0059 allRoughs = zeros(numberOfContrasts,1);
0060 
0061 reflectivity = cell(numberOfContrasts,1);
0062 <span class="keyword">for</span> i = 1:numberOfContrasts
0063     reflectivity{i} = [1 1 ; 1 1];
0064 <span class="keyword">end</span>
0065 coder.varsize(<span class="string">'reflectivity{:}'</span>,[10000 2],[1 1]);
0066 
0067 Simulation = cell(numberOfContrasts,1);
0068 <span class="keyword">for</span> i = 1:numberOfContrasts
0069     Simulation{i} = [1 1 ; 1 1];
0070 <span class="keyword">end</span>
0071 coder.varsize(<span class="string">'Simulation{:}'</span>,[10000 2],[1 0]);
0072 
0073 
0074 shifted_data = cell(numberOfContrasts,1);
0075 <span class="keyword">for</span> i = 1:numberOfContrasts
0076     shifted_data{i} = [1 1 1; 1 1 1];
0077 <span class="keyword">end</span>
0078 coder.varsize(<span class="string">'shifted_data{:}'</span>,[10000 3],[1 0]);
0079 
0080 layerSlds = cell(numberOfContrasts,1);
0081 <span class="keyword">for</span> i = 1:numberOfContrasts
0082     layerSlds{i} = [1 1 1; 1 1 1];
0083 <span class="keyword">end</span>
0084 coder.varsize(<span class="string">'layerSlds{:}'</span>,[10000 3],[1 0]);
0085 
0086 sldProfiles = cell(numberOfContrasts,1);
0087 <span class="keyword">for</span> i = 1:numberOfContrasts
0088     sldProfiles{i} = [1 1; 1 1];
0089 <span class="keyword">end</span>
0090 coder.varsize(<span class="string">'sldProfiles{:}'</span>,[10000 2],[1 0]);
0091 
0092 allLayers = cell(numberOfContrasts,1);
0093 <span class="keyword">for</span> i = 1:numberOfContrasts
0094     allLayers{i} = [1 ; 1];
0095 <span class="keyword">end</span>
0096 coder.varsize(<span class="string">'allLayers{:}'</span>,[10000 3],[1 1]);
0097 
0098 parallel = controls.para;
0099 
0100 <span class="keyword">switch</span> parallel
0101     <span class="keyword">case</span> <span class="string">'single'</span>
0102         [outSsubs,<span class="keyword">...</span>
0103             backgs,<span class="keyword">...</span>
0104             qshifts,<span class="keyword">...</span>
0105             sfs,<span class="keyword">...</span>
0106             nbas,<span class="keyword">...</span>
0107             nbss,<span class="keyword">...</span>
0108             resols,<span class="keyword">...</span>
0109             chis,<span class="keyword">...</span>
0110             reflectivity,<span class="keyword">...</span>
0111             Simulation,<span class="keyword">...</span>
0112             shifted_data,<span class="keyword">...</span>
0113             layerSlds,<span class="keyword">...</span>
0114             sldProfiles,<span class="keyword">...</span>
0115             allLayers,<span class="keyword">...</span>
0116             allRoughs] = <a href="../../../RAT/targetFunctions/standard_TF/standardTF_custXY/standardTF_custXY_single.html" class="code" title="function         [outSsubs,backgs,qshifts,sfs,nbas,nbss,resols,chis,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers,allRoughs] = standardTF_custXY_single(resample,numberOfContrasts,geometry,repeatLayers ,cBacks ,cShifts ,cScales ,cNbas ,cNbss,cRes ,backs ,shifts ,sf,nba ,nbs ,res ,dataPresent ,allData ,dataLimits ,simLimits ,nParams ,params ,contrastLayers ,numberOfLayers ,layersDetails,problemDef_limits,fname,lang,path,backsType,calcSLD);">standardTF_custXY_single</a>(resample, <span class="keyword">...</span>
0117             numberOfContrasts, <span class="keyword">...</span>
0118             geometry, <span class="keyword">...</span>
0119             repeatLayers , <span class="keyword">...</span>
0120             cBacks , <span class="keyword">...</span>
0121             cShifts , <span class="keyword">...</span>
0122             cScales , <span class="keyword">...</span>
0123             cNbas , <span class="keyword">...</span>
0124             cNbss, <span class="keyword">...</span>
0125             cRes , <span class="keyword">...</span>
0126             backs , <span class="keyword">...</span>
0127             shifts , <span class="keyword">...</span>
0128             sf, <span class="keyword">...</span>
0129             nba , <span class="keyword">...</span>
0130             nbs , <span class="keyword">...</span>
0131             res , <span class="keyword">...</span>
0132             dataPresent , <span class="keyword">...</span>
0133             allData , <span class="keyword">...</span>
0134             dataLimits , <span class="keyword">...</span>
0135             simLimits , <span class="keyword">...</span>
0136             nParams , <span class="keyword">...</span>
0137             params , <span class="keyword">...</span>
0138             contrastLayers , <span class="keyword">...</span>
0139             numberOfLayers , <span class="keyword">...</span>
0140             layersDetails, <span class="keyword">...</span>
0141             problemDef_limits, <span class="keyword">...</span>
0142             fname, <span class="keyword">...</span>
0143             lang, <span class="keyword">...</span>
0144             path,<span class="keyword">...</span>
0145             backsType,<span class="keyword">...</span>
0146             calcSLD);
0147         
0148     <span class="keyword">case</span> <span class="string">'points'</span>
0149         [outSsubs,<span class="keyword">...</span>
0150             backgs,<span class="keyword">...</span>
0151             qshifts,<span class="keyword">...</span>
0152             sfs,<span class="keyword">...</span>
0153             nbas,<span class="keyword">...</span>
0154             nbss,<span class="keyword">...</span>
0155             resols,<span class="keyword">...</span>
0156             chis,<span class="keyword">...</span>
0157             reflectivity,<span class="keyword">...</span>
0158             Simulation,<span class="keyword">...</span>
0159             shifted_data,<span class="keyword">...</span>
0160             layerSlds,<span class="keyword">...</span>
0161             sldProfiles,<span class="keyword">...</span>
0162             allLayers,<span class="keyword">...</span>
0163             allRoughs] = <a href="../../../RAT/targetFunctions/standard_TF/standardTF_custXY/standardTF_custXY_paraPoints.html" class="code" title="function         [outSsubs,backgs,qshifts,sfs,nbas,nbss,resols,chis,reflectivity,Simulation,shifted_data,layerSlds,sldProfiles,allLayers,allRoughs] = standardTF_custXY_paraPoints(resample,numberOfContrasts,geometry,repeatLayers ,cBacks ,cShifts ,cScales ,cNbas ,cNbss,cRes ,backs ,shifts ,sf,nba ,nbs ,res ,dataPresent ,allData ,dataLimits ,simLimits ,nParams ,params ,contrastLayers ,numberOfLayers ,layersDetails,problemDef_limits,fname,lang,path,backsType,calcSLD);">standardTF_custXY_paraPoints</a>(resample, <span class="keyword">...</span>
0164             numberOfContrasts, <span class="keyword">...</span>
0165             geometry, <span class="keyword">...</span>
0166             repeatLayers , <span class="keyword">...</span>
0167             cBacks , <span class="keyword">...</span>
0168             cShifts , <span class="keyword">...</span>
0169             cScales , <span class="keyword">...</span>
0170             cNbas , <span class="keyword">...</span>
0171             cNbss, <span class="keyword">...</span>
0172             cRes , <span class="keyword">...</span>
0173             backs , <span class="keyword">...</span>
0174             shifts , <span class="keyword">...</span>
0175             sf, <span class="keyword">...</span>
0176             nba , <span class="keyword">...</span>
0177             nbs , <span class="keyword">...</span>
0178             res , <span class="keyword">...</span>
0179             dataPresent , <span class="keyword">...</span>
0180             allData , <span class="keyword">...</span>
0181             dataLimits , <span class="keyword">...</span>
0182             simLimits , <span class="keyword">...</span>
0183             nParams , <span class="keyword">...</span>
0184             params , <span class="keyword">...</span>
0185             contrastLayers , <span class="keyword">...</span>
0186             numberOfLayers , <span class="keyword">...</span>
0187             layersDetails, <span class="keyword">...</span>
0188             problemDef_limits, <span class="keyword">...</span>
0189             fname, <span class="keyword">...</span>
0190             lang, <span class="keyword">...</span>
0191             path,<span class="keyword">...</span>
0192             backsType,<span class="keyword">...</span>
0193             calcSLD);
0194         
0195 <span class="comment">%      case 'contrasts'</span>
0196 <span class="comment">%         [outSsubs,...</span>
0197 <span class="comment">%             backgs,...</span>
0198 <span class="comment">%             qshifts,...</span>
0199 <span class="comment">%             sfs,...</span>
0200 <span class="comment">%             nbas,...</span>
0201 <span class="comment">%             nbss,...</span>
0202 <span class="comment">%             resols,...</span>
0203 <span class="comment">%             chis,...</span>
0204 <span class="comment">%             reflectivity,...</span>
0205 <span class="comment">%             Simulation,...</span>
0206 <span class="comment">%             shifted_data,...</span>
0207 <span class="comment">%             layerSlds,...</span>
0208 <span class="comment">%             sldProfiles,...</span>
0209 <span class="comment">%             allLayers,...</span>
0210 <span class="comment">%             allRoughs] = standardTF_custXY_paraContrasts(resample, ...</span>
0211 <span class="comment">%             numberOfContrasts, ...</span>
0212 <span class="comment">%             geometry, ...</span>
0213 <span class="comment">%             repeatLayers , ...</span>
0214 <span class="comment">%             cBacks , ...</span>
0215 <span class="comment">%             cShifts , ...</span>
0216 <span class="comment">%             cScales , ...</span>
0217 <span class="comment">%             cNbas , ...</span>
0218 <span class="comment">%             cNbss, ...</span>
0219 <span class="comment">%             cRes , ...</span>
0220 <span class="comment">%             backs , ...</span>
0221 <span class="comment">%             shifts , ...</span>
0222 <span class="comment">%             sf, ...</span>
0223 <span class="comment">%             nba , ...</span>
0224 <span class="comment">%             nbs , ...</span>
0225 <span class="comment">%             res , ...</span>
0226 <span class="comment">%             dataPresent , ...</span>
0227 <span class="comment">%             allData , ...</span>
0228 <span class="comment">%             dataLimits , ...</span>
0229 <span class="comment">%             simLimits , ...</span>
0230 <span class="comment">%             nParams , ...</span>
0231 <span class="comment">%             params , ...</span>
0232 <span class="comment">%             contrastLayers , ...</span>
0233 <span class="comment">%             numberOfLayers , ...</span>
0234 <span class="comment">%             layersDetails, ...</span>
0235 <span class="comment">%             problemDef_limits, ...</span>
0236 <span class="comment">%             fname, ...</span>
0237 <span class="comment">%             lang, ...</span>
0238 <span class="comment">%             path,...</span>
0239 <span class="comment">%             backsType,...</span>
0240 <span class="comment">%             calcSLD);</span>
0241         
0242 <span class="keyword">end</span>
0243 
0244 problem.ssubs = outSsubs;
0245 problem.backgrounds = backgs;
0246 problem.qshifts = qshifts;
0247 problem.scalefactors = sfs;
0248 problem.nbairs = nbas;
0249 problem.nbsubs = nbss;
0250 problem.resolutions = resols;
0251 problem.calculations.all_chis = chis;
0252 problem.calculations.sum_chi = sum(chis);
0253 problem.allSubRough = allRoughs;
0254 <span class="comment">%problem.calculations.reflectivity = reflectivity;</span>
0255 <span class="comment">%problem.calculations.Simulation = Simulation;</span>
0256 <span class="comment">%problem.shifted_data = shifted_data;</span>
0257 <span class="comment">%problem.layers = layerSlds;</span>
0258 <span class="comment">%problem.calculations.slds = sldProfiles;</span>
0259 <span class="comment">%problem.allLayers = allLayers;</span>
0260 
0261 
0262 
0263 <span class="comment">% result = cell(1,6);</span>
0264 <span class="comment">%</span>
0265 <span class="comment">%</span>
0266 <span class="comment">%</span>
0267 <span class="comment">% %result = {{};{};{};{};{};{};{}};</span>
0268 <span class="comment">% result{1} = reflectivity;</span>
0269 <span class="comment">% result{2} = Simulation;</span>
0270 <span class="comment">% result{3} = shifted_data;</span>
0271 <span class="comment">% result{4} = layerSlds;</span>
0272 <span class="comment">% result{5} = sldProfiles;</span>
0273 <span class="comment">% result{6} = allLayers;</span>
0274 <span class="comment">%</span>
0275 <span class="comment">%</span>
0276 <span class="comment">% %Result coder definitions....</span>
0277 <span class="comment">%  coder.varsize('result{1}',[Inf 1],[1 0]);           %Reflectivity</span>
0278 <span class="comment">%  coder.varsize('result{1}{:}',[Inf 2],[1 0]);</span>
0279 <span class="comment">% %</span>
0280 <span class="comment">%  coder.varsize('result{2}',[Inf 1],[1 0]);           %Simulatin</span>
0281 <span class="comment">%  coder.varsize('result{2}{:}',[Inf 2],[1 0]);</span>
0282 <span class="comment">% %</span>
0283 <span class="comment">%  coder.varsize('result{3}',[Inf 1],[1 0]);           %Shifted data</span>
0284 <span class="comment">%  coder.varsize('result{3}{:}',[Inf 3],[1 0]);</span>
0285 <span class="comment">% %</span>
0286 <span class="comment">%  coder.varsize('result{4}',[Inf 1],[1 0]);           %Layers slds</span>
0287 <span class="comment">%  coder.varsize('result{4}{:}',[Inf 3],[1 0]);</span>
0288 <span class="comment">% %</span>
0289 <span class="comment">%  coder.varsize('result{5}',[Inf 1],[1 0]);           %Sld profiles</span>
0290 <span class="comment">%  coder.varsize('results{5}{:}',[Inf 2],[1 0]);</span>
0291 <span class="comment">% %</span>
0292 <span class="comment">%  coder.varsize('result{6}',[Inf 1],[1 0]);           %All layers</span>
0293 <span class="comment">%  coder.varsize('result{6}{:}',[Inf 1],[1 0]);</span>
0294 
0295 
0296 <span class="keyword">if</span> coder.target(<span class="string">'MATLAB'</span>)
0297     <span class="keyword">if</span> RAT_DEBUG
0298         DEBUGVARS.standardTF_stanLay_reflectivityCalculation.problem = problem;
0299         DEBUGVARS.standardTF_stanLay_reflectivityCalculation.results = results;
0300     <span class="keyword">end</span>
0301 <span class="keyword">end</span>
0302 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Sun 18-Apr-2021 20:40:23 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>