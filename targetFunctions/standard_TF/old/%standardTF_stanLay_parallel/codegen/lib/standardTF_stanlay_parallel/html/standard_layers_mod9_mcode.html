<pre class="code">
<span class="srcline"><span class="lineno"><a href="6,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T10U3">layersOutput</span>,<span class="var type1" id="S3T11U4">sRoughOutput</span>] = standard_layers_mod(<span class="var type1" id="S4T13U7">params</span>,<span class="var type1" id="S5T15U8">contrastLayers</span>,<span class="var type1" id="S6T11U9">numberOfLayers</span>,<span class="var type1" id="S7T30U10">layersDetails</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="6,2" id="srcline2"> 2</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="6,3" id="srcline3"> 3</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="6,4" id="srcline4"> 4</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T27:U7"><span class="var type1" id="S6T11U14">numberOfLayers</span> == <span class="mxinfo " id="T11:U9">0</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="6,5" id="srcline5"> 5</a></span><span class="line">    <span class="mxinfo " id="T11:U10"><span class="var type1" id="S8T11U18">sub_rough</span> = <span class="mxinfo " id="T11:U12"><span class="var type1" id="S4T13U20">params</span>(<span class="mxinfo " id="T11:U14">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="6,6" id="srcline6"> 6</a></span><span class="line">    <span class="mxinfo " id="T10:U15"><span class="var type1" id="S9T10U24">layersList</span> = <span class="mxinfo " id="T23:U17">[]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="6,7" id="srcline7"> 7</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,8" id="srcline8"> 8</a></span><span class="line">    <span class="mxinfo " id="T31:U18"><span class="var type1" id="S10T31U30">layersValues</span> = <span class="mxinfo " id="T31:U20">zeros(<span class="var type1" id="S6T11U33">numberOfLayers</span>,<span class="mxinfo " id="T11:U22">5</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="6,9" id="srcline9"> 9</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S12T11U37">n</span> = <span class="mxinfo " id="T11:U24">1</span>:<span class="var type1" id="S6T11U40">numberOfLayers</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,10" id="srcline10">10</a></span><span class="line">        <span class="mxinfo " id="T22:U26"><span class="var type1" id="S13T22U43">thisLayer</span> = <span class="mxinfo " id="T22:U28"><span class="var type1" id="S7T30U45">layersDetails</span>{<span class="var type1" id="S12T11U46">n</span>}</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="6,11" id="srcline11">11</a></span><span class="line">        <span class="keyword">for</span> <span class="var type1" id="S14T11U49">m</span> = <span class="mxinfo " id="T11:U32">1</span>:4</span></span>
<span class="srcline"><span class="lineno"><a href="6,12" id="srcline12">12</a></span><span class="line">            <span class="mxinfo " id="T11:U33"><span class="var type1" id="S15T11U55">thisItem</span> = <span class="mxinfo " id="T11:U35"><span class="var type1" id="S13T22U57">thisLayer</span>(<span class="var type1" id="S14T11U58">m</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="6,13" id="srcline13">13</a></span><span class="line">            <span class="keyword">if</span> <span class="mxinfo " id="T27:U38">~<span class="mxinfo " id="T27:U39">isnan(<span class="var type1" id="S15T11U64">thisItem</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="6,14" id="srcline14">14</a></span><span class="line">                <span class="mxinfo " id="T11:U41"><span class="mxinfo " id="T11:U42"><span class="var type1" id="S10T31U68">layersValues</span>(<span class="var type1" id="S12T11U69">n</span>,<span class="var type1" id="S14T11U70">m</span>)</span> = <span class="mxinfo " id="T11:U46"><span class="var type1" id="S4T13U72">params</span>(<span class="var type1" id="S15T11U73">thisItem</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="6,15" id="srcline15">15</a></span><span class="line">            <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,16" id="srcline16">16</a></span><span class="line">                <span class="mxinfo " id="T11:U49"><span class="mxinfo " id="T11:U50"><span class="var type1" id="S10T31U78">layersValues</span>(<span class="var type1" id="S12T11U79">n</span>,<span class="var type1" id="S14T11U80">m</span>)</span> = <span class="mxinfo " id="T11:U54">NaN</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="6,17" id="srcline17">17</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,18" id="srcline18">18</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,19" id="srcline19">19</a></span><span class="line">        <span class="mxinfo " id="T11:U55"><span class="var type1" id="S18T11U85">whichBulk</span> = <span class="mxinfo " id="T11:U57"><span class="var type1" id="S13T22U87">thisLayer</span>(<span class="mxinfo " id="T11:U59">5</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="6,20" id="srcline20">20</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo " id="T27:U60"><span class="var type1" id="S18T11U92">whichBulk</span> == <span class="mxinfo " id="T11:U62">2</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="6,21" id="srcline21">21</a></span><span class="line">            <span class="mxinfo " id="T11:U63"><span class="mxinfo " id="T11:U64"><span class="var type1" id="S10T31U97">layersValues</span>(<span class="var type1" id="S12T11U98">n</span>,<span class="mxinfo " id="T11:U67">5</span>)</span> = <span class="mxinfo " id="T11:U68">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="6,22" id="srcline22">22</a></span><span class="line">        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,23" id="srcline23">23</a></span><span class="line">            <span class="mxinfo " id="T11:U69"><span class="mxinfo " id="T11:U70"><span class="var type1" id="S10T31U105">layersValues</span>(<span class="var type1" id="S12T11U106">n</span>,<span class="mxinfo " id="T11:U73">5</span>)</span> = <span class="mxinfo " id="T11:U74">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="6,24" id="srcline24">24</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,25" id="srcline25">25</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,26" id="srcline26">26</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="6,27" id="srcline27">27</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="6,28" id="srcline28">28</a></span><span class="line">    <span class="keyword">if</span> ~isempty(<span class="var type1" id="S5T15U114">contrastLayers</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="6,29" id="srcline29">29</a></span><span class="line">        <span class="mxinfo " id="T10:U76"><span class="var type1" id="S9T10U117">layersList</span> = <span class="mxinfo " id="T32:U78">zeros(<span class="mxinfo " id="T11:U79">length(<span class="var type1" id="S5T15U122">contrastLayers</span>)</span>,<span class="mxinfo " id="T11:U81">5</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="6,30" id="srcline30">30</a></span><span class="line">        <span class="keyword">for</span> <span class="var type1" id="S12T11U126">n</span> = <span class="mxinfo " id="T11:U83">1</span>:length(<span class="var type1" id="S5T15U131">contrastLayers</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="6,31" id="srcline31">31</a></span><span class="line">            <span class="mxinfo " id="T11:U85"><span class="var type1" id="S21T11U134">thisRow</span> = <span class="mxinfo " id="T11:U87"><span class="var type1" id="S5T15U136">contrastLayers</span>(<span class="var type1" id="S12T11U137">n</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="6,32" id="srcline32">32</a></span><span class="line">            <span class="mxinfo " id="T33:U90"><span class="mxinfo " id="T33:U91"><span class="var type1" id="S9T10U141">layersList</span>(<span class="var type1" id="S12T11U142">n</span>,<span class="mxinfo " id="T34:U94">:</span>)</span> = <span class="mxinfo " id="T35:U95"><span class="var type1" id="S10T31U145">layersValues</span>(<span class="var type1" id="S21T11U146">thisRow</span>,<span class="mxinfo " id="T36:U98">:</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="6,33" id="srcline33">33</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,34" id="srcline34">34</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,35" id="srcline35">35</a></span><span class="line">        <span class="var type0" id="S9T0U151">layersList</span> = [];</span></span>
<span class="srcline"><span class="lineno"><a href="6,36" id="srcline36">36</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,37" id="srcline37">37</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,38" id="srcline38">38</a></span><span class="line"><span class="mxinfo " id="T11:U99"><span class="var type1" id="S8T11U156">sub_rough</span> = <span class="mxinfo " id="T11:U101"><span class="var type1" id="S4T13U158">params</span>(<span class="mxinfo " id="T11:U103">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="6,39" id="srcline39">39</a></span><span class="line"><span class="mxinfo " id="T10:U104"><span class="var type1" id="S2T10U162">layersOutput</span> = <span class="var type1" id="S9T10U163">layersList</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="6,40" id="srcline40">40</a></span><span class="line"><span class="mxinfo " id="T11:U107"><span class="var type1" id="S3T11U166">sRoughOutput</span> = <span class="var type1" id="S8T11U167">sub_rough</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="6,41" id="srcline41">41</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="6,42" id="srcline42">42</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="6,43" id="srcline43">43</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="6,44" id="srcline44">44</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="6,45" id="srcline45">45</a></span><span class="line"></span></span>
</pre>
