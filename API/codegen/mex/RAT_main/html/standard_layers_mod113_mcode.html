<pre class="code">
<span class="srcline"><span class="lineno"><a href="23,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T14U3">layersOutput</span>,<span class="var type1" id="S3T4U4">sRoughOutput</span>] = standard_layers_mod(<span class="var type1" id="S4T20U7">params</span>,<span class="var type1" id="S5T19U8">contrastLayers</span>,<span class="var type1" id="S6T4U9">numberOfLayers</span>,<span class="var type1" id="S7T209U10">layersDetails</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="23,2" id="srcline2"> 2</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="23,3" id="srcline3"> 3</a></span><span class="line"><span class="mxinfo " id="T4:U7"><span class="var type1" id="S3T4U13">sRoughOutput</span> = <span class="mxinfo " id="T4:U9"><span class="var type1" id="S4T20U15">params</span>(<span class="mxinfo " id="T4:U11">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="23,4" id="srcline4"> 4</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T65:U12"><span class="var type1" id="S6T4U20">numberOfLayers</span> == <span class="mxinfo " id="T4:U14">0</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="23,5" id="srcline5"> 5</a></span><span class="line">    <span class="mxinfo " id="T4:U15"><span class="var type1" id="S8T4U24">sub_rough</span> = <span class="mxinfo " id="T4:U17"><span class="var type1" id="S4T20U26">params</span>(<span class="mxinfo " id="T4:U19">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="23,6" id="srcline6"> 6</a></span><span class="line">    <span class="mxinfo " id="T14:U20"><span class="var type1" id="S9T14U30">layersList</span> = <span class="mxinfo " id="T21:U22">[]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="23,7" id="srcline7"> 7</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="23,8" id="srcline8"> 8</a></span><span class="line">    <span class="mxinfo " id="T210:U23"><span class="var type1" id="S10T210U36">layersValues</span> = <span class="mxinfo " id="T210:U25">zeros(<span class="var type1" id="S6T4U39">numberOfLayers</span>,<span class="mxinfo " id="T4:U27">5</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="23,9" id="srcline9"> 9</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S12T4U43">n</span> = <span class="mxinfo " id="T2:U29"><span class="mxinfo " id="T4:U30">1</span>:<span class="var type1" id="S6T4U46">numberOfLayers</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="23,10" id="srcline10">10</a></span><span class="line">        <span class="mxinfo " id="T30:U32"><span class="var type1" id="S13T30U49">thisLayer</span> = <span class="mxinfo " id="T30:U34"><span class="var type1" id="S7T209U51">layersDetails</span>{<span class="var type1" id="S12T4U52">n</span>}</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="23,11" id="srcline11">11</a></span><span class="line">        <span class="keyword">for</span> <span class="var type1" id="S14T4U55">m</span> = <span class="mxinfo " id="T211:U38"><span class="mxinfo " id="T4:U39">1</span>:4</span></span></span>
<span class="srcline"><span class="lineno"><a href="23,12" id="srcline12">12</a></span><span class="line">            <span class="mxinfo " id="T4:U40"><span class="var type1" id="S15T4U61">thisItem</span> = <span class="mxinfo " id="T4:U42"><span class="var type1" id="S13T30U63">thisLayer</span>(<span class="var type1" id="S14T4U64">m</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="23,13" id="srcline13">13</a></span><span class="line">            <span class="keyword">if</span> <span class="mxinfo " id="T65:U45">~<span class="mxinfo " id="T65:U46">isnan(<span class="var type1" id="S15T4U70">thisItem</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="23,14" id="srcline14">14</a></span><span class="line">                <span class="mxinfo " id="T4:U48"><span class="mxinfo " id="T4:U49"><span class="var type1" id="S10T210U74">layersValues</span>(<span class="var type1" id="S12T4U75">n</span>,<span class="var type1" id="S14T4U76">m</span>)</span> = <span class="mxinfo " id="T4:U53"><span class="var type1" id="S4T20U78">params</span>(<span class="var type1" id="S15T4U79">thisItem</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="23,15" id="srcline15">15</a></span><span class="line">            <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="23,16" id="srcline16">16</a></span><span class="line">                <span class="mxinfo " id="T4:U56"><span class="mxinfo " id="T4:U57"><span class="var type1" id="S10T210U84">layersValues</span>(<span class="var type1" id="S12T4U85">n</span>,<span class="var type1" id="S14T4U86">m</span>)</span> = <span class="mxinfo " id="T4:U61">NaN</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="23,17" id="srcline17">17</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="23,18" id="srcline18">18</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="23,19" id="srcline19">19</a></span><span class="line">        <span class="mxinfo " id="T4:U62"><span class="var type1" id="S18T4U91">whichBulk</span> = <span class="mxinfo " id="T4:U64"><span class="var type1" id="S13T30U93">thisLayer</span>(<span class="mxinfo " id="T67:U66">5</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="23,20" id="srcline20">20</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo " id="T65:U67"><span class="var type1" id="S18T4U98">whichBulk</span> == <span class="mxinfo " id="T4:U69">2</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="23,21" id="srcline21">21</a></span><span class="line">            <span class="mxinfo " id="T4:U70"><span class="mxinfo " id="T4:U71"><span class="var type1" id="S10T210U103">layersValues</span>(<span class="var type1" id="S12T4U104">n</span>,<span class="mxinfo " id="T4:U74">5</span>)</span> = <span class="mxinfo " id="T4:U75">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="23,22" id="srcline22">22</a></span><span class="line">        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="23,23" id="srcline23">23</a></span><span class="line">            <span class="mxinfo " id="T4:U76"><span class="mxinfo " id="T4:U77"><span class="var type1" id="S10T210U111">layersValues</span>(<span class="var type1" id="S12T4U112">n</span>,<span class="mxinfo " id="T4:U80">5</span>)</span> = <span class="mxinfo " id="T4:U81">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="23,24" id="srcline24">24</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="23,25" id="srcline25">25</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="23,26" id="srcline26">26</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="23,27" id="srcline27">27</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="23,28" id="srcline28">28</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T65:U82">~<span class="mxinfo " id="T65:U83">isempty(<span class="var type1" id="S5T19U120">contrastLayers</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="23,29" id="srcline29">29</a></span><span class="line">        <span class="mxinfo " id="T14:U85"><span class="var type1" id="S9T14U123">layersList</span> = <span class="mxinfo " id="T212:U87">zeros(<span class="mxinfo " id="T4:U88">length(<span class="var type1" id="S5T19U128">contrastLayers</span>)</span>,<span class="mxinfo " id="T4:U90">5</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="23,30" id="srcline30">30</a></span><span class="line">        <span class="keyword">for</span> <span class="var type1" id="S12T4U132">n</span> = <span class="mxinfo " id="T59:U92"><span class="mxinfo " id="T4:U93">1</span>:length(<span class="var type1" id="S5T19U137">contrastLayers</span>)</span></span></span>
<span class="srcline"><span class="lineno"><a href="23,31" id="srcline31">31</a></span><span class="line">            <span class="mxinfo " id="T4:U95"><span class="var type1" id="S21T4U140">thisRow</span> = <span class="mxinfo " id="T4:U97"><span class="var type1" id="S5T19U142">contrastLayers</span>(<span class="var type1" id="S12T4U143">n</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="23,32" id="srcline32">32</a></span><span class="line">            <span class="mxinfo " id="T213:U100"><span class="mxinfo " id="T213:U101"><span class="var type1" id="S9T14U147">layersList</span>(<span class="var type1" id="S12T4U148">n</span>,<span class="mxinfo " id="T214:U104">:</span>)</span> = <span class="mxinfo " id="T30:U105"><span class="var type1" id="S10T210U151">layersValues</span>(<span class="var type1" id="S21T4U152">thisRow</span>,<span class="mxinfo " id="T215:U108">:</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="23,33" id="srcline33">33</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="23,34" id="srcline34">34</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="23,35" id="srcline35">35</a></span><span class="line">        <span class="var type0" id="S9T0U157">layersList</span> = [];</span></span>
<span class="srcline"><span class="lineno"><a href="23,36" id="srcline36">36</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="23,37" id="srcline37">37</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="23,38" id="srcline38">38</a></span><span class="line"><span class="mxinfo " id="T4:U109"><span class="var type1" id="S8T4U162">sub_rough</span> = <span class="mxinfo " id="T4:U111"><span class="var type1" id="S4T20U164">params</span>(<span class="mxinfo " id="T67:U113">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="23,39" id="srcline39">39</a></span><span class="line"><span class="mxinfo " id="T14:U114"><span class="var type1" id="S2T14U168">layersOutput</span> = <span class="var type1" id="S9T14U169">layersList</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="23,40" id="srcline40">40</a></span><span class="line"><span class="mxinfo " id="T4:U117"><span class="var type1" id="S3T4U172">sRoughOutput</span> = <span class="var type1" id="S8T4U173">sub_rough</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="23,41" id="srcline41">41</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="23,42" id="srcline42">42</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="23,43" id="srcline43">43</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="23,44" id="srcline44">44</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="23,45" id="srcline45">45</a></span><span class="line"></span></span>
</pre>
